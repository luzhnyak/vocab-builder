import{a as m,j as e,r as i,L as T}from"./index-D9T1WUkT.js";import{c as o,i as S,b as E,a as A,M as k,A as B}from"./AddWordForm-BmIiotzD.js";import{c as M,a as L,u as P,C as D,o as I}from"./index.esm-BlPaKFPD.js";import{C as U}from"./CircularProgress-B03S_PKd.js";const $="_wrapper_x06pd_1",q="_blockWrapper_x06pd_6",F="_uaBlock_x06pd_18",R="_enBlock_x06pd_32",z="_inputWrapper_x06pd_38",V="_textareaWrapper_x06pd_50",Y="_input_x06pd_38",G="_btnWrapper_x06pd_66",H="_btn_x06pd_66",J="_btnCancel_x06pd_95",K="_btnNext_x06pd_118",O="_labelWrapper_x06pd_138",Q="_progress_x06pd_144",X="_inputError_x06pd_152",Z="_errormessage_x06pd_161",ee="_emptyWrapper_x06pd_169",se="_emptyTitle_x06pd_184",re="_emptyText_x06pd_192",te="_img_x06pd_200",s={wrapper:$,blockWrapper:q,uaBlock:F,enBlock:R,inputWrapper:z,textareaWrapper:V,input:Y,btnWrapper:G,btn:H,btnCancel:J,btnNext:K,labelWrapper:O,progress:Q,inputError:X,errormessage:Z,emptyWrapper:ee,emptyTitle:se,emptyText:re,img:te},ae=()=>{const{result:n}=m(a=>({result:a.result})),l=n.filter(a=>a.isDone),r=n.filter(a=>!a.isDone);return e.jsxs("div",{className:o.modalWrapper,children:[e.jsx("h3",{className:o.title,children:"Well done"}),e.jsxs("div",{className:o.resultWrapper,children:[e.jsxs("div",{children:[e.jsx("p",{className:o.resultTitle,children:"Ð¡orrect answers:"}),e.jsx("ul",{className:o.resultList,children:l.map(a=>e.jsx("li",{className:o.resultItem,children:a.en}))})]}),e.jsxs("div",{children:[e.jsx("p",{className:o.resultTitle,children:"Mistakes:"}),e.jsx("ul",{className:o.resultList,children:r.map(a=>e.jsx("li",{className:o.resultItem,children:a.en}))})]})]})]})},ne=M({answerWord:L().required("This is a required field")}),le=()=>{var j,b,W;const[n,l]=i.useState([]),[r,a]=i.useState(0),[N,p]=i.useState(0),[w,u]=i.useState(!1),{tasks:t,addAnswer:v,result:d}=m(c=>({tasks:c.tasks,addAnswer:c.addAnswer,result:c.result})),{control:y,handleSubmit:h,reset:x,formState:{errors:_}}=P({resolver:I(ne),defaultValues:{answerWord:""}}),g=async c=>{n.length!==t.length&&(console.log(t.length,r),l([...n,{_id:t[r]._id,ua:t[r].task==="en"?t[r].ua:c.answerWord,en:t[r].task==="ua"?t[r].en:c.answerWord,task:t[r].task}]),t.length!==0&&p(Math.round((r+1)*100/t.length)),!(r>=t.length-1)&&(a(r+1),x()))},f=async()=>{h(g),v(n),l([]),a(0),p(0),x(),u(!0)},C=()=>{l([]),a(0),p(0),x()};return e.jsxs("div",{className:s.wrapper,children:[e.jsx("div",{className:s.progress,children:e.jsx(U,{size:58,strokeWidth:5,progress:N,withText:!0})}),e.jsx("form",{onSubmit:h(g),children:e.jsxs("div",{className:s.blockWrapper,children:[e.jsxs("div",{className:s.uaBlock,children:[e.jsxs("div",{className:s.inputWrapper,children:[e.jsx("div",{children:e.jsx("p",{className:s.taskWord,children:t.length>0&&t[r].task==="ua"?(j=t[r])==null?void 0:j.en:(b=t[r])==null?void 0:b.ua})}),e.jsxs("div",{className:s.labelWrapper,children:[e.jsx("img",{src:S,alt:"Word"}),e.jsx("span",{children:"Ukrainian"})]})]}),n.length!==t.length&&e.jsxs("button",{type:"submit",className:s.btnNext,children:["Next",e.jsx("img",{src:E,alt:""})]})]}),e.jsx("div",{className:s.enBlock,children:e.jsxs("div",{className:s.inputWrapper,children:[e.jsxs("div",{className:s.textareaWrapper,children:[e.jsx(D,{name:"answerWord",control:y,render:({field:c})=>e.jsx("input",{type:"text",...c,className:s.input})}),_&&e.jsx("span",{className:s.errormessage,children:(W=_.answerWord)==null?void 0:W.message})]}),e.jsxs("div",{className:s.labelWrapper,children:[e.jsx("img",{src:A,alt:"Word"}),e.jsx("span",{children:"English"})]})]})})]})}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:f,children:"Save"}),e.jsx("button",{type:"button",className:s.btnCancel,onClick:C,children:"Cancel"})]}),w&&(d==null?void 0:d.length)!==0&&e.jsx(k,{onClose:()=>u(!1),children:e.jsx(ae,{})})]})},oe=()=>{const[n,l]=i.useState(!1);return e.jsxs("div",{className:s.emptyWrapper,children:[e.jsxs("div",{children:[e.jsx("h1",{children:"You don't have a single word to learn right now. "}),e.jsx("p",{children:"Please create or add a word to start the workout. We want to improve your vocabulary and develop your knowledge, so please share the words you are interested in adding to your study."}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:()=>l(!0),children:"Add word"}),e.jsx(T,{className:s.btnCancel,to:"/dictionary",children:"Cancel"})]})]}),e.jsx("img",{srcSet:"./images/blood-report.png, ./images/blood-report@2x.png 2x",src:"./images/blood-report.png",alt:"blood report",width:"265",height:"283",className:s.img}),n&&e.jsx(k,{onClose:l,children:e.jsx(B,{onClose:()=>l(!1)})})]})},xe=()=>{const{tasks:n,getTasks:l}=m(r=>({tasks:r.tasks,getTasks:r.getTasks}));return i.useEffect(()=>{l()},[l]),e.jsxs("main",{className:"container",children:[n.length!==0&&e.jsx(le,{}),n.length===0&&e.jsx(oe,{})]})};export{xe as default};
