import{a as W,j as s,F as S,b as k,d as I,e as D,r as f,u as R}from"./index-D9T1WUkT.js";import{c as t,P as E,D as F}from"./Pagination-EWYZw5AP.js";import{c as n,i as P,a as v,M as O}from"./AddWordForm-BmIiotzD.js";import{c as T,a as y,u as w,o as A,C as _}from"./index.esm-BlPaKFPD.js";import{C as M}from"./CircularProgress-B03S_PKd.js";const $="_wrapper_8pax4_1",L="_btn_8pax4_10",U="_btnIcon_8pax4_27",q="_list_8pax4_36",j={wrapper:$,btn:L,btnIcon:U,list:q},z=({setShowEditModal:d,onClose:c,id:u})=>{const{refresh:l,setRefresh:h}=W(i=>({getOwnWords:i.getOwnWords,refresh:i.refresh,setRefresh:i.setRefresh})),p=()=>{d(!0),c()},r=async()=>{await I(u),h(!l),c()};return s.jsx("div",{className:j.wrapper,children:s.jsxs("ul",{className:j.list,children:[s.jsx("li",{children:s.jsxs("button",{className:j.btn,onClick:p,children:[s.jsx(S,{className:j.btnIcon}),s.jsx("span",{children:"Edit"})]})}),s.jsx("li",{children:s.jsxs("button",{className:j.btn,onClick:r,children:[s.jsx(k,{className:j.btnIcon}),s.jsx("span",{children:"Delete"})]})})]})})},B=T({en:y().required(),ua:y().required()}),V=({id:d,en:c,ua:u,category:l,isIrregular:h,onClose:p})=>{var m,b;const{setRefresh:r,refresh:i}=W(a=>({refresh:a.refresh,setRefresh:a.setRefresh})),{control:x,handleSubmit:N,formState:{errors:o}}=w({resolver:A(B),defaultValues:{en:c,ua:u}}),g=async a=>{await D(d,{en:a.en,ua:a.ua,category:l,isIrregular:h}),r(!i),p()};return s.jsx("div",{className:n.modalWrapper,children:s.jsxs("form",{onSubmit:N(g),children:[s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{children:[s.jsx(_,{name:"ua",control:x,render:({field:a})=>s.jsx("input",{type:"text",...a,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(m=o.ua)==null?void 0:m.message})]}),s.jsx("img",{src:P,alt:"Word"}),s.jsx("span",{children:"Ukrainian"})]}),s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{children:[s.jsx(_,{name:"en",control:x,render:({field:a})=>s.jsx("input",{type:"text",...a,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(b=o.en)==null?void 0:b.message})]}),s.jsx("img",{src:v,alt:"Word"}),s.jsx("span",{children:"English"})]}),s.jsxs("div",{className:n.btnWrapper,children:[s.jsx("button",{type:"submit",className:n.btn,children:"Save"}),s.jsx("button",{type:"button",className:n.btnCancel,onClick:()=>p(),children:"Cancel"})]})]})})},G=()=>{const[d,c]=f.useState(!1),[u,l]=f.useState(!1),[h,p]=f.useState(null),{ownWords:r,category:i,page:x,refresh:N,keyword:o,isIrregular:g,getOwnWords:m,setPage:b}=W(e=>({category:e.category,isIrregular:e.isIrregular,page:e.page,refresh:e.refresh,keyword:e.keyword,ownWords:e.ownWords,setPage:e.setPage,getOwnWords:e.getOwnWords})),{isLogin:a}=R(e=>({isLogin:e.isLogin}));f.useEffect(()=>{a&&m({category:i||"",page:x.toString(),isIrregular:g.toString(),keyword:o||""})},[m,x,o,i,g,N,a]);const C=e=>{c(!d),p(e)};return s.jsxs("div",{children:[s.jsxs("table",{className:t.table,cellSpacing:0,children:[s.jsx("thead",{children:s.jsxs("tr",{className:t.headRow,children:[s.jsx("th",{children:s.jsxs("div",{className:t.thWrapper,children:[s.jsx("span",{children:"Word"}),s.jsx("img",{src:v,alt:"Word"})]})}),s.jsx("th",{children:s.jsxs("div",{className:t.thWrapper,children:[s.jsx("span",{children:"Translation"}),s.jsx("img",{src:P,alt:"Translation"})]})}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Progress"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:(r==null?void 0:r.results)&&(r==null?void 0:r.results.map(e=>s.jsxs("tr",{className:t.bodyRow,children:[s.jsx("td",{children:e.en}),s.jsx("td",{children:e.ua}),s.jsx("td",{children:e.category}),s.jsx("td",{children:s.jsxs("div",{className:t.progressWrapper,children:[s.jsxs("span",{children:[e.progress," %"]}),s.jsx(M,{size:26,strokeWidth:4,progress:e.progress,color1:"#2BD627",color2:"#D4F8D3",color3:"#D4F8D3"})]})}),s.jsxs("td",{className:t.lastTd,children:[s.jsx("button",{className:t.btnPopup,onClick:()=>C(e._id),children:"..."}),s.jsx("div",{className:t.popupWrapper,children:d&&h===e._id&&s.jsx(z,{setShowEditModal:l,onClose:()=>c(!1),id:e._id})}),u&&h===e._id&&s.jsx(O,{onClose:l,children:s.jsx(V,{onClose:()=>l(!1),id:e._id,en:e.en,ua:e.ua,category:e.category,isIrregular:e.isIrregular})})]})]},e._id)))})]}),s.jsx(E,{totalPages:(r==null?void 0:r.totalPages)||1,page:x,onPageChange:b})]})},Y=()=>s.jsxs("main",{className:"container",children:[s.jsx(F,{isAddWord:!0}),s.jsx(G,{})]});export{Y as default};
