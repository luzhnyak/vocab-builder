import{a as W,j as s,F as C,b as S,d as k,e as I,r as f}from"./index-DAQWS7bo.js";import{c as t,P as D,D as R}from"./Pagination-Bt35yzV6.js";import{c as n,i as P,a as v,M as E}from"./ua-C_iFZk7-.js";import{c as F,a as y,u as O,o as T,C as _}from"./index.esm-DkWQ9A9y.js";import{C as w}from"./CircularProgress-BIyPQ4dP.js";const M="_wrapper_8pax4_1",$="_btn_8pax4_10",A="_btnIcon_8pax4_27",U="_list_8pax4_36",j={wrapper:M,btn:$,btnIcon:A,list:U},q=({setShowEditModal:d,onClose:c,id:m})=>{const{refresh:i,setRefresh:h}=W(l=>({getOwnWords:l.getOwnWords,refresh:l.refresh,setRefresh:l.setRefresh})),p=()=>{d(!0),c()},r=async()=>{await k(m),h(!i),c()};return s.jsx("div",{className:j.wrapper,children:s.jsxs("ul",{className:j.list,children:[s.jsx("li",{children:s.jsxs("button",{className:j.btn,onClick:p,children:[s.jsx(C,{className:j.btnIcon}),s.jsx("span",{children:"Edit"})]})}),s.jsx("li",{children:s.jsxs("button",{className:j.btn,onClick:r,children:[s.jsx(S,{className:j.btnIcon}),s.jsx("span",{children:"Delete"})]})})]})})},z=F({en:y().required(),ua:y().required()}),B=({id:d,en:c,ua:m,category:i,isIrregular:h,onClose:p})=>{var u,b;const{setRefresh:r,refresh:l}=W(a=>({refresh:a.refresh,setRefresh:a.setRefresh})),{control:x,handleSubmit:N,formState:{errors:o}}=O({resolver:T(z),defaultValues:{en:c,ua:m}}),g=async a=>{await I(d,{en:a.en,ua:a.ua,category:i,isIrregular:h}),r(!l),p()};return s.jsx("div",{className:n.modalWrapper,children:s.jsxs("form",{onSubmit:N(g),children:[s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{children:[s.jsx(_,{name:"ua",control:x,render:({field:a})=>s.jsx("input",{type:"text",...a,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(u=o.ua)==null?void 0:u.message})]}),s.jsx("img",{src:P,alt:"Word"}),s.jsx("span",{children:"Ukrainian"})]}),s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{children:[s.jsx(_,{name:"en",control:x,render:({field:a})=>s.jsx("input",{type:"text",...a,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(b=o.en)==null?void 0:b.message})]}),s.jsx("img",{src:v,alt:"Word"}),s.jsx("span",{children:"English"})]}),s.jsxs("div",{className:n.btnWrapper,children:[s.jsx("button",{type:"submit",className:n.btn,children:"Save"}),s.jsx("button",{type:"button",className:n.btnCancel,onClick:()=>p(),children:"Cancel"})]})]})})},V=()=>{const[d,c]=f.useState(!1),[m,i]=f.useState(!1),[h,p]=f.useState(null),{ownWords:r,category:l,page:x,refresh:N,keyword:o,isIrregular:g,getOwnWords:u,setPage:b}=W(e=>({category:e.category,isIrregular:e.isIrregular,page:e.page,refresh:e.refresh,keyword:e.keyword,ownWords:e.ownWords,setPage:e.setPage,getOwnWords:e.getOwnWords}));f.useEffect(()=>{u({category:l||"",page:x.toString(),isIrregular:g.toString(),keyword:o||""})},[u,x,o,l,g,N]);const a=e=>{c(!d),p(e)};return s.jsxs("div",{children:[s.jsxs("table",{className:t.table,cellSpacing:0,children:[s.jsx("thead",{children:s.jsxs("tr",{className:t.headRow,children:[s.jsx("th",{children:s.jsxs("div",{className:t.thWrapper,children:[s.jsx("span",{children:"Word"}),s.jsx("img",{src:v,alt:"Word"})]})}),s.jsx("th",{children:s.jsxs("div",{className:t.thWrapper,children:[s.jsx("span",{children:"Translation"}),s.jsx("img",{src:P,alt:"Translation"})]})}),s.jsx("th",{children:"Category"}),s.jsx("th",{children:"Progress"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:(r==null?void 0:r.results)&&(r==null?void 0:r.results.map(e=>s.jsxs("tr",{className:t.bodyRow,children:[s.jsx("td",{children:e.en}),s.jsx("td",{children:e.ua}),s.jsx("td",{children:e.category}),s.jsx("td",{children:s.jsxs("div",{className:t.progressWrapper,children:[s.jsxs("span",{children:[e.progress," %"]}),s.jsx(w,{size:26,strokeWidth:4,progress:e.progress,color1:"#2BD627",color2:"#D4F8D3",color3:"#D4F8D3"})]})}),s.jsxs("td",{className:t.lastTd,children:[s.jsx("button",{className:t.btnPopup,onClick:()=>a(e._id),children:"..."}),s.jsx("div",{className:t.popupWrapper,children:d&&h===e._id&&s.jsx(q,{setShowEditModal:i,onClose:()=>c(!1),id:e._id})}),m&&h===e._id&&s.jsx(E,{onClose:i,children:s.jsx(B,{onClose:()=>i(!1),id:e._id,en:e.en,ua:e.ua,category:e.category,isIrregular:e.isIrregular})})]})]},e._id)))})]}),s.jsx(D,{totalPages:(r==null?void 0:r.totalPages)||1,page:x,onPageChange:b})]})},Q=()=>s.jsxs("main",{className:"container",children:[s.jsx(R,{isAddWord:!0}),s.jsx(V,{})]});export{Q as default};
