import{a as k,j as s,r as o}from"./index-DAQWS7bo.js";import{c as l,i as T,b as B,a as E,M}from"./ua-C_iFZk7-.js";import{c as y,a as A,u as D,C as I,o as P}from"./index.esm-DkWQ9A9y.js";import{C as U}from"./CircularProgress-BIyPQ4dP.js";const $="_wrapper_9tjrc_1",q="_blockWrapper_9tjrc_6",L="_uaBlock_9tjrc_15",R="_enBlock_9tjrc_25",z="_inputWrapper_9tjrc_30",F="_input_9tjrc_30",V="_btnWrapper_9tjrc_54",G="_btn_9tjrc_54",H="_btnCancel_9tjrc_83",J="_btnNext_9tjrc_106",K="_labelWrapper_9tjrc_126",O="_progress_9tjrc_132",Q="_inputError_9tjrc_140",X="_errormessage_9tjrc_149",r={wrapper:$,blockWrapper:q,uaBlock:L,enBlock:R,inputWrapper:z,input:F,btnWrapper:V,btn:G,btnCancel:H,btnNext:J,labelWrapper:K,progress:O,inputError:Q,errormessage:X},Y=()=>{const{result:c}=k(a=>({result:a.result})),i=c.filter(a=>a.isDone),t=c.filter(a=>!a.isDone);return s.jsxs("div",{className:l.modalWrapper,children:[s.jsx("h3",{className:l.title,children:"Well done"}),s.jsxs("div",{className:l.resultWrapper,children:[s.jsxs("div",{children:[s.jsx("p",{className:l.resultTitle,children:"Ð¡orrect answers:"}),s.jsx("ul",{className:l.resultList,children:i.map(a=>s.jsx("li",{className:l.resultItem,children:a.en}))})]}),s.jsxs("div",{children:[s.jsx("p",{className:l.resultTitle,children:"Mistakes:"}),s.jsx("ul",{className:l.resultList,children:t.map(a=>s.jsx("li",{className:l.resultItem,children:a.en}))})]})]})]})},Z=y({answerWord:A().required("This is a required field")}),ss=()=>{var b,g,W;const[c,i]=o.useState([]),[t,a]=o.useState(0),[N,d]=o.useState(0),[w,m]=o.useState(!1),{tasks:e,getTasks:j,addAnswer:f,result:p}=k(n=>({tasks:n.tasks,getTasks:n.getTasks,addAnswer:n.addAnswer,result:n.result})),{control:v,handleSubmit:h,reset:u,formState:{errors:x}}=D({resolver:P(Z),defaultValues:{answerWord:""}}),_=async n=>{c.length!==e.length&&(console.log(e.length,t),i([...c,{_id:e[t]._id,ua:e[t].task==="en"?e[t].ua:n.answerWord,en:e[t].task==="ua"?e[t].en:n.answerWord,task:e[t].task}]),e.length!==0&&d(Math.round((t+1)*100/e.length)),!(t>=e.length-1)&&(a(t+1),u()))},C=async()=>{h(_),f(c),i([]),a(0),d(0),u(),m(!0)},S=()=>{i([]),a(0),d(0),u()};return o.useEffect(()=>{j()},[j]),s.jsxs("div",{className:r.wrapper,children:[s.jsx("div",{className:r.progress,children:s.jsx(U,{size:58,strokeWidth:5,progress:N,withText:!0})}),s.jsx("form",{onSubmit:h(_),children:s.jsxs("div",{className:r.blockWrapper,children:[s.jsxs("div",{className:r.uaBlock,children:[s.jsxs("div",{className:r.inputWrapper,children:[s.jsx("div",{children:s.jsx("p",{className:r.taskWord,children:e.length>0&&e[t].task==="ua"?(b=e[t])==null?void 0:b.en:(g=e[t])==null?void 0:g.ua})}),s.jsxs("div",{className:r.labelWrapper,children:[s.jsx("img",{src:T,alt:"Word"}),s.jsx("span",{children:"Ukrainian"})]})]}),c.length!==e.length&&s.jsxs("button",{type:"submit",className:r.btnNext,children:["Next",s.jsx("img",{src:B,alt:""})]})]}),s.jsx("div",{className:r.enBlock,children:s.jsxs("div",{className:r.inputWrapper,children:[s.jsxs("div",{children:[s.jsx(I,{name:"answerWord",control:v,render:({field:n})=>s.jsx("textarea",{...n,className:r.input})}),x&&s.jsx("span",{className:r.errormessage,children:(W=x.answerWord)==null?void 0:W.message})]}),s.jsxs("div",{className:r.labelWrapper,children:[s.jsx("img",{src:E,alt:"Word"}),s.jsx("span",{children:"English"})]})]})})]})}),s.jsxs("div",{className:r.btnWrapper,children:[s.jsx("button",{type:"submit",className:r.btn,onClick:C,children:"Save"}),s.jsx("button",{type:"button",className:r.btnCancel,onClick:S,children:"Cancel"})]}),w&&(p==null?void 0:p.length)&&s.jsx(M,{onClose:()=>m(!1),children:s.jsx(Y,{})})]})},ns=()=>s.jsx("main",{className:"container",children:s.jsx(ss,{})});export{ns as default};
