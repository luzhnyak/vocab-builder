import{a as u,j as s,r as i,L as T}from"./index-C2sAosan.js";import{c as l,i as S,b as B,a as E,M as w,A as $}from"./AddWordForm-yDxxQtI6.js";import{c as A,a as M,u as I,C as D,o as L}from"./index.esm-adXi1aK0.js";import{C as P}from"./CircularProgress-gI_rmXVf.js";const F="_wrapper_1q5oz_1",U="_blockWrapper_1q5oz_9",R="_uaBlock_1q5oz_21",V="_enBlock_1q5oz_35",G="_inputWrapper_1q5oz_41",O="_textareaWrapper_1q5oz_53",X="_input_1q5oz_41",Y="_btnWrapper_1q5oz_69",H="_btn_1q5oz_69",J="_btnCancel_1q5oz_98",K="_btnNext_1q5oz_121",Q="_labelWrapper_1q5oz_141",Z="_progress_1q5oz_147",ss="_inputError_1q5oz_155",es="_errormessage_1q5oz_164",rs="_emptyWrapper_1q5oz_172",ts="_emptyTitle_1q5oz_187",as="_emptyText_1q5oz_195",ns="_img_1q5oz_203",e={wrapper:F,blockWrapper:U,uaBlock:R,enBlock:V,inputWrapper:G,textareaWrapper:O,input:X,btnWrapper:Y,btn:H,btnCancel:J,btnNext:K,labelWrapper:Q,progress:Z,inputError:ss,errormessage:es,emptyWrapper:rs,emptyTitle:ts,emptyText:as,img:ns},k="/vocab-builder/assets/open-orange-book-floating-B79F-mOh.png",os="/vocab-builder/assets/open-orange-book-floating@2x-Dibv50qI.png",ls=()=>{const{result:n}=u(a=>({result:a.result})),o=n.filter(a=>a.isDone),r=n.filter(a=>!a.isDone);return s.jsxs("div",{className:l.modalWrapper,children:[s.jsx("h3",{className:l.title,children:"Well done"}),s.jsxs("div",{className:l.resultWrapper,children:[s.jsxs("div",{className:l.block,children:[s.jsx("p",{className:l.resultTitle,children:"Ð¡orrect answers:"}),s.jsx("ul",{className:l.resultList,children:o.map(a=>s.jsx("li",{className:l.resultItem,children:a.en}))})]}),s.jsxs("div",{className:l.block,children:[s.jsx("p",{className:l.resultTitle,children:"Mistakes:"}),s.jsx("ul",{className:l.resultList,children:r.map(a=>s.jsx("li",{className:l.resultItem,children:a.en}))})]})]}),s.jsx("img",{srcSet:`${k} 1x, ${os} 2x`,src:k,alt:"Vocab Builder",className:l.resultImg,width:"212",height:"179"})]})},cs=A({answerWord:M().required("This is a required field")}),is=()=>{var _,j,W;const[n,o]=i.useState([]),[r,a]=i.useState(0),[v,d]=i.useState(0),[y,h]=i.useState(!1),{tasks:t,addAnswer:f,result:p}=u(c=>({tasks:c.tasks,addAnswer:c.addAnswer,result:c.result})),{control:q,handleSubmit:x,reset:m,formState:{errors:g}}=I({resolver:L(cs),defaultValues:{answerWord:""}}),b=async c=>{n.length!==t.length&&(console.log(t.length,r),o([...n,{_id:t[r]._id,ua:t[r].task==="en"?t[r].ua:c.answerWord,en:t[r].task==="ua"?t[r].en:c.answerWord,task:t[r].task}]),t.length!==0&&d(Math.round((r+1)*100/t.length)),!(r>=t.length-1)&&(a(r+1),m()))},z=async()=>{x(b),f(n),o([]),a(0),d(0),m(),h(!0)},C=()=>{o([]),a(0),d(0),m()};return s.jsxs("div",{className:e.wrapper,children:[s.jsx("div",{className:e.progress,children:s.jsx(P,{size:58,strokeWidth:5,progress:v,withText:!0})}),s.jsx("form",{onSubmit:x(b),children:s.jsxs("div",{className:e.blockWrapper,children:[s.jsxs("div",{className:e.uaBlock,children:[s.jsxs("div",{className:e.inputWrapper,children:[s.jsx("div",{children:s.jsx("p",{className:e.taskWord,children:t.length>0&&t[r].task==="ua"?(_=t[r])==null?void 0:_.en:(j=t[r])==null?void 0:j.ua})}),s.jsxs("div",{className:e.labelWrapper,children:[s.jsx("img",{src:S,alt:"Word"}),s.jsx("span",{children:"Ukrainian"})]})]}),n.length!==t.length&&s.jsxs("button",{type:"submit",className:e.btnNext,children:["Next",s.jsx("img",{src:B,alt:""})]})]}),s.jsx("div",{className:e.enBlock,children:s.jsxs("div",{className:e.inputWrapper,children:[s.jsxs("div",{className:e.textareaWrapper,children:[s.jsx(D,{name:"answerWord",control:q,render:({field:c})=>s.jsx("input",{type:"text",...c,className:e.input})}),g&&s.jsx("span",{className:e.errormessage,children:(W=g.answerWord)==null?void 0:W.message})]}),s.jsxs("div",{className:e.labelWrapper,children:[s.jsx("img",{src:E,alt:"Word"}),s.jsx("span",{children:"English"})]})]})})]})}),s.jsxs("div",{className:e.btnWrapper,children:[s.jsx("button",{type:"submit",className:e.btn,onClick:z,children:"Save"}),s.jsx("button",{type:"button",className:e.btnCancel,onClick:C,children:"Cancel"})]}),y&&(p==null?void 0:p.length)!==0&&s.jsx(w,{onClose:()=>h(!1),children:s.jsx(ls,{})})]})},N="/vocab-builder/assets/blood-report-nD4GaXak.png",ds="/vocab-builder/assets/blood-report@2x-BE68giIT.png",ps=()=>{const[n,o]=i.useState(!1);return s.jsxs("div",{className:e.emptyWrapper,children:[s.jsxs("div",{children:[s.jsx("h1",{children:"You don't have a single word to learn right now. "}),s.jsx("p",{children:"Please create or add a word to start the workout. We want to improve your vocabulary and develop your knowledge, so please share the words you are interested in adding to your study."}),s.jsxs("div",{className:e.btnWrapper,children:[s.jsx("button",{type:"submit",className:e.btn,onClick:()=>o(!0),children:"Add word"}),s.jsx(T,{className:e.btnCancel,to:"/dictionary",children:"Cancel"})]})]}),s.jsx("img",{srcSet:`${N} 1x, ${ds} 2x`,src:N,alt:"blood report",width:"265",height:"283",className:e.img}),n&&s.jsx(w,{onClose:o,children:s.jsx($,{onClose:()=>o(!1)})})]})},gs=()=>{const{tasks:n,getTasks:o}=u(r=>({tasks:r.tasks,getTasks:r.getTasks}));return i.useEffect(()=>{o()},[o]),s.jsxs("main",{className:"container",children:[n.length!==0&&s.jsx(is,{}),n.length===0&&s.jsx(ps,{})]})};export{gs as default};
