import{a as x,j as e,r as i,L as M}from"./index-g3wtBpw3.js";import{c as o,i as y,a as w,b as I,M as T,A as D}from"./AddWordForm-Cuq8Vp3-.js";import{c as U,a as f,u as L,C as z,o as P}from"./index.esm-Dqdqd48e.js";import{C as q}from"./CircularProgress-DpdacEAD.js";const V="_wrapper_1bhzo_1",Z="_blockWrapper_1bhzo_9",R="_uaBlock_1bhzo_21",G="_enBlock_1bhzo_35",O="_inputWrapper_1bhzo_41",X="_textareaWrapper_1bhzo_53",Y="_input_1bhzo_41",H="_btnWrapper_1bhzo_69",J="_btn_1bhzo_69",K="_btnCancel_1bhzo_98",Q="_btnNext_1bhzo_121",ee="_labelWrapper_1bhzo_141",se="_progress_1bhzo_147",re="_inputError_1bhzo_155",ae="_errormessage_1bhzo_164",te="_emptyWrapper_1bhzo_172",ne="_emptyTitle_1bhzo_187",le="_emptyText_1bhzo_195",oe="_img_1bhzo_203",s={wrapper:V,blockWrapper:Z,uaBlock:R,enBlock:G,inputWrapper:O,textareaWrapper:X,input:Y,btnWrapper:H,btn:J,btnCancel:K,btnNext:Q,labelWrapper:ee,progress:se,inputError:re,errormessage:ae,emptyWrapper:te,emptyTitle:ne,emptyText:le,img:oe},C="/vocab-builder/assets/open-orange-book-floating-B79F-mOh.png",ce="/vocab-builder/assets/open-orange-book-floating@2x-Dibv50qI.png",ie=()=>{const{result:n}=x(t=>({result:t.result})),l=n.filter(t=>t.isDone),r=n.filter(t=>!t.isDone);return e.jsxs("div",{className:o.modalWrapper,children:[e.jsx("h3",{className:o.title,children:"Well done"}),e.jsxs("div",{className:o.resultWrapper,children:[e.jsxs("div",{className:o.block,children:[e.jsx("p",{className:o.resultTitle,children:"Сorrect answers:"}),e.jsx("ul",{className:o.resultList,children:l.map(t=>e.jsx("li",{className:o.resultItem,children:t.en}))})]}),e.jsxs("div",{className:o.block,children:[e.jsx("p",{className:o.resultTitle,children:"Mistakes:"}),e.jsx("ul",{className:o.resultList,children:r.map(t=>e.jsx("li",{className:o.resultItem,children:t.en}))})]})]}),e.jsx("img",{srcSet:`${C} 1x, ${ce} 2x`,src:C,alt:"Vocab Builder",className:o.resultImg,width:"212",height:"179"})]})},de=U({en:f().required("Field must not be empty").matches(/\b[A-Za-z'-]+(?:\s+[A-Za-z'-]+)*\b/,"Field must be English"),ua:f().required("Field must not be empty").matches(/^(?![A-Za-z])[А-ЯІЄЇҐґа-яієїʼ\s]+$/u,"Field must be Ukrainian")}),pe=()=>{var k,N,W,v;const[n,l]=i.useState([]),[r,t]=i.useState(0),[E,m]=i.useState(0),[F,b]=i.useState(!1),{tasks:a,addAnswer:A,result:h}=x(c=>({tasks:c.tasks,addAnswer:c.addAnswer,result:c.result})),{control:g,handleSubmit:j,reset:u,setValue:d,formState:{errors:p}}=L({resolver:P(de),defaultValues:{en:"",ua:""}}),_=async c=>{console.log(a.length,r),n.length!==a.length&&(l([...n,{_id:a[r]._id,ua:c.ua,en:c.en,task:a[r].task}]),a.length!==0&&m(Math.round((r+1)*100/a.length)),!(r>=a.length-1)&&(t(r+1),u()))},B=async()=>{j(_),A(n),l([]),t(0),m(0),u(),b(!0)},$=()=>{l([]),t(0),m(0),u()};return i.useEffect(()=>{a[r].task==="ua"?(d("en",a[r].en||""),d("ua","")):(d("en",""),d("ua",a[r].ua||""))},[d,r,a]),e.jsxs("div",{className:s.wrapper,children:[e.jsx("div",{className:s.progress,children:e.jsx(q,{size:58,strokeWidth:5,progress:E,withText:!0})}),e.jsx("form",{onSubmit:j(_),children:e.jsxs("div",{className:s.blockWrapper,children:[e.jsxs("div",{className:s.uaBlock,children:[e.jsxs("div",{className:s.inputWrapper,children:[e.jsxs("div",{className:s.textareaWrapper,children:[a[r].task==="en"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{name:"en",control:g,render:({field:c})=>e.jsx("input",{type:"text",...c,className:s.input,placeholder:"Введіть переклад"})}),p&&e.jsx("span",{className:s.errormessage,children:(k=p.en)==null?void 0:k.message})]}),a[r].task==="ua"&&e.jsxs(e.Fragment,{children:[e.jsx(z,{name:"ua",control:g,render:({field:c})=>e.jsx("input",{type:"text",...c,className:s.input,placeholder:"Введіть переклад"})}),p&&e.jsx("span",{className:s.errormessage,children:(N=p.ua)==null?void 0:N.message})]})]}),e.jsx("div",{className:s.labelWrapper,children:a[r].task==="ua"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:y,alt:"Word"}),e.jsx("span",{children:"Ukrainian"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:w,alt:"Word"}),e.jsx("span",{children:"English"})]})})]}),n.length!==a.length&&e.jsxs("button",{type:"submit",className:s.btnNext,children:["Next",e.jsx("img",{src:I,alt:""})]})]}),e.jsx("div",{className:s.enBlock,children:e.jsxs("div",{className:s.inputWrapper,children:[e.jsx("div",{children:e.jsx("p",{className:s.taskWord,children:a.length>0&&a[r].task==="ua"?(W=a[r])==null?void 0:W.en:(v=a[r])==null?void 0:v.ua})}),e.jsx("div",{className:s.labelWrapper,children:a[r].task==="en"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:y,alt:"Word"}),e.jsx("span",{children:"Ukrainian"})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:w,alt:"Word"}),e.jsx("span",{children:"English"})]})})]})})]})}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:B,children:"Save"}),e.jsx("button",{type:"button",className:s.btnCancel,onClick:$,children:"Cancel"})]}),F&&(h==null?void 0:h.length)!==0&&e.jsx(T,{onClose:()=>b(!1),children:e.jsx(ie,{})})]})},S="/vocab-builder/assets/blood-report-nD4GaXak.png",me="/vocab-builder/assets/blood-report@2x-BE68giIT.png",he=()=>{const[n,l]=i.useState(!1);return e.jsxs("div",{className:s.emptyWrapper,children:[e.jsxs("div",{children:[e.jsx("h1",{children:"You don't have a single word to learn right now. "}),e.jsx("p",{children:"Please create or add a word to start the workout. We want to improve your vocabulary and develop your knowledge, so please share the words you are interested in adding to your study."}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:()=>l(!0),children:"Add word"}),e.jsx(M,{className:s.btnCancel,to:"/dictionary",children:"Cancel"})]})]}),e.jsx("img",{srcSet:`${S} 1x, ${me} 2x`,src:S,alt:"blood report",width:"265",height:"283",className:s.img}),n&&e.jsx(T,{onClose:l,children:e.jsx(D,{onClose:()=>l(!1)})})]})},je=()=>{const{tasks:n,getTasks:l}=x(r=>({tasks:r.tasks,getTasks:r.getTasks}));return i.useEffect(()=>{l()},[l]),e.jsxs("main",{className:"container",children:[n.length!==0&&e.jsx(pe,{}),n.length===0&&e.jsx(he,{})]})};export{je as default};
