import{a as y,j as s,F as k,b as F,d as I,e as D,r as N,u as E}from"./index-SmcHTqeh.js";import{c as r,P as R,N as T,D as A}from"./NotFound-DvhdpF16.js";import{c as n,i as P,a as v,M as O}from"./AddWordForm-BduutJN_.js";import{c as $,a as _,u as z,o as M,C}from"./index.esm-A068dR4T.js";import{C as U}from"./CircularProgress-Y7IEBb7-.js";const L="_wrapper_8pax4_1",Z="_btn_8pax4_10",q="_btnIcon_8pax4_27",B="_list_8pax4_36",m={wrapper:L,btn:Z,btnIcon:q,list:B},V=({setShowEditModal:d,onClose:i,id:x})=>{const{refresh:c,setRefresh:h}=y(l=>({getOwnWords:l.getOwnWords,refresh:l.refresh,setRefresh:l.setRefresh})),p=()=>{d(!0),i()},a=async()=>{await I(x),h(!c),i()};return s.jsx("div",{className:m.wrapper,children:s.jsxs("ul",{className:m.list,children:[s.jsx("li",{children:s.jsxs("button",{className:m.btn,onClick:p,children:[s.jsx(k,{className:m.btnIcon}),s.jsx("span",{children:"Edit"})]})}),s.jsx("li",{children:s.jsxs("button",{className:m.btn,onClick:a,children:[s.jsx(F,{className:m.btnIcon}),s.jsx("span",{children:"Delete"})]})})]})})},G=$({en:_().required("Field must not be empty").matches(/\b[A-Za-z'-]+(?:\s+[A-Za-z'-]+)*\b/,"Field must be English"),ua:_().required("Field must not be empty").matches(/^(?![A-Za-z])[А-ЯІЄЇҐґа-яієїʼ\s]+$/u,"Field must be Ukrainian")}),H=({id:d,en:i,ua:x,category:c,isIrregular:h,onClose:p})=>{var g,b;const{setRefresh:a,refresh:l}=y(t=>({refresh:t.refresh,setRefresh:t.setRefresh})),{control:u,handleSubmit:f,formState:{errors:o}}=z({resolver:M(G),defaultValues:{en:i,ua:x}}),j=async t=>{await D(d,{en:t.en,ua:t.ua,category:c,isIrregular:h}),a(!l),p()};return s.jsx("div",{className:n.modalWrapper,children:s.jsxs("form",{onSubmit:f(j),children:[s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{className:n.inputWrap,children:[s.jsx(C,{name:"ua",control:u,render:({field:t})=>s.jsx("input",{type:"text",...t,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(g=o.ua)==null?void 0:g.message})]}),s.jsx("img",{src:P,alt:"Word"}),s.jsx("span",{children:"Ukrainian"})]}),s.jsxs("div",{className:n.inputWrapper,children:[s.jsxs("div",{className:n.inputWrap,children:[s.jsx(C,{name:"en",control:u,render:({field:t})=>s.jsx("input",{type:"text",...t,className:n.input})}),o&&s.jsx("span",{className:n.errormessage,children:(b=o.en)==null?void 0:b.message})]}),s.jsx("img",{src:v,alt:"Word"}),s.jsx("span",{children:"English"})]}),s.jsxs("div",{className:n.btnWrapper,children:[s.jsx("button",{type:"submit",className:n.btn,children:"Save"}),s.jsx("button",{type:"button",className:n.btnCancel,onClick:()=>p(),children:"Cancel"})]})]})})},J=()=>{const[d,i]=N.useState(!1),[x,c]=N.useState(!1),[h,p]=N.useState(null),{ownWords:a,category:l,page:u,refresh:f,keyword:o,isIrregular:j,getOwnWords:g,setPage:b,setTrainingCount:t}=y(e=>({category:e.category,isIrregular:e.isIrregular,page:e.page,refresh:e.refresh,keyword:e.keyword,ownWords:e.ownWords,setPage:e.setPage,getOwnWords:e.getOwnWords,setTrainingCount:e.setTrainingCount})),{isLogin:W}=E(e=>({isLogin:e.isLogin}));N.useEffect(()=>{W&&(g({category:l||"",page:u.toString(),isIrregular:j.toString(),keyword:o||""}),t())},[g,u,o,l,j,f,W,t]);const S=e=>{i(!d),p(e)};return s.jsxs("div",{children:[(a==null?void 0:a.results.length)!==0&&s.jsxs("table",{className:r.table,cellSpacing:0,children:[s.jsx("thead",{children:s.jsxs("tr",{className:r.headRow,children:[s.jsx("th",{children:s.jsxs("div",{className:r.thWrapper,children:[s.jsx("span",{children:"Word"}),s.jsx("img",{src:v,alt:"Word",className:r.flag})]})}),s.jsx("th",{children:s.jsxs("div",{className:r.thWrapper,children:[s.jsx("span",{children:"Translation"}),s.jsx("img",{src:P,alt:"Translation",className:r.flag})]})}),s.jsx("th",{className:r.category,children:"Category"}),s.jsx("th",{children:"Progress"}),s.jsx("th",{})]})}),s.jsx("tbody",{children:(a==null?void 0:a.results)&&(a==null?void 0:a.results.map(e=>s.jsxs("tr",{className:r.bodyRow,children:[s.jsx("td",{children:e.en}),s.jsx("td",{children:e.ua}),s.jsx("td",{className:r.category,children:e.category}),s.jsx("td",{children:s.jsxs("div",{className:r.progressWrapper,children:[s.jsxs("span",{className:r.category,children:[e.progress," %"]}),s.jsx(U,{size:26,strokeWidth:4,progress:e.progress,color1:"#2BD627",color2:"#D4F8D3",color3:"#D4F8D3"})]})}),s.jsxs("td",{className:r.lastTd,children:[s.jsx("button",{className:r.btnPopup,onClick:()=>S(e._id),children:"..."}),s.jsx("div",{className:r.popupWrapper,children:d&&h===e._id&&s.jsx(V,{setShowEditModal:c,onClose:()=>i(!1),id:e._id})}),x&&h===e._id&&s.jsx(O,{onClose:c,children:s.jsx(H,{onClose:()=>c(!1),id:e._id,en:e.en,ua:e.ua,category:e.category,isIrregular:e.isIrregular})})]})]},e._id)))})]}),(a==null?void 0:a.results.length)!==0&&s.jsx(R,{totalPages:(a==null?void 0:a.totalPages)||1,page:u,onPageChange:b}),(a==null?void 0:a.results.length)===0&&s.jsx(T,{})]})},ss=()=>s.jsxs("main",{className:"container",children:[s.jsx(A,{isAddWord:!0}),s.jsx(J,{})]});export{ss as default};
