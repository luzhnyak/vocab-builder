import{a as u,j as e,r as i,L as z}from"./index-DvD1Hqk0.js";import{c as l,i as C,b as S,a as T,M as k,A as E}from"./AddWordForm-OwV95Qx6.js";import{c as B,a as A,u as M,C as I,o as L}from"./index.esm-DqUsmVAl.js";import{C as P}from"./CircularProgress-DFvELJop.js";const D="_wrapper_1q5oz_1",U="_blockWrapper_1q5oz_9",$="_uaBlock_1q5oz_21",F="_enBlock_1q5oz_35",R="_inputWrapper_1q5oz_41",V="_textareaWrapper_1q5oz_53",Y="_input_1q5oz_41",G="_btnWrapper_1q5oz_69",H="_btn_1q5oz_69",J="_btnCancel_1q5oz_98",K="_btnNext_1q5oz_121",O="_labelWrapper_1q5oz_141",Q="_progress_1q5oz_147",X="_inputError_1q5oz_155",Z="_errormessage_1q5oz_164",ee="_emptyWrapper_1q5oz_172",se="_emptyTitle_1q5oz_187",re="_emptyText_1q5oz_195",ae="_img_1q5oz_203",s={wrapper:D,blockWrapper:U,uaBlock:$,enBlock:F,inputWrapper:R,textareaWrapper:V,input:Y,btnWrapper:G,btn:H,btnCancel:J,btnNext:K,labelWrapper:O,progress:Q,inputError:X,errormessage:Z,emptyWrapper:ee,emptyTitle:se,emptyText:re,img:ae},te=()=>{const{result:n}=u(t=>({result:t.result})),o=n.filter(t=>t.isDone),r=n.filter(t=>!t.isDone);return e.jsxs("div",{className:l.modalWrapper,children:[e.jsx("h3",{className:l.title,children:"Well done"}),e.jsxs("div",{className:l.resultWrapper,children:[e.jsxs("div",{className:l.block,children:[e.jsx("p",{className:l.resultTitle,children:"Ð¡orrect answers:"}),e.jsx("ul",{className:l.resultList,children:o.map(t=>e.jsx("li",{className:l.resultItem,children:t.en}))})]}),e.jsxs("div",{className:l.block,children:[e.jsx("p",{className:l.resultTitle,children:"Mistakes:"}),e.jsx("ul",{className:l.resultList,children:r.map(t=>e.jsx("li",{className:l.resultItem,children:t.en}))})]})]}),e.jsx("img",{srcSet:"./images/open-orange-book-floating.png, ./images/open-orange-book-floating@2x.png 2x",src:"./images/open-orange-book-floating.png",alt:"Vocab Builder",className:l.resultImg,width:"212",height:"179"})]})},ne=B({answerWord:A().required("This is a required field")}),oe=()=>{var j,b,W;const[n,o]=i.useState([]),[r,t]=i.useState(0),[N,p]=i.useState(0),[w,h]=i.useState(!1),{tasks:a,addAnswer:v,result:d}=u(c=>({tasks:c.tasks,addAnswer:c.addAnswer,result:c.result})),{control:y,handleSubmit:x,reset:m,formState:{errors:g}}=M({resolver:L(ne),defaultValues:{answerWord:""}}),_=async c=>{n.length!==a.length&&(console.log(a.length,r),o([...n,{_id:a[r]._id,ua:a[r].task==="en"?a[r].ua:c.answerWord,en:a[r].task==="ua"?a[r].en:c.answerWord,task:a[r].task}]),a.length!==0&&p(Math.round((r+1)*100/a.length)),!(r>=a.length-1)&&(t(r+1),m()))},f=async()=>{x(_),v(n),o([]),t(0),p(0),m(),h(!0)},q=()=>{o([]),t(0),p(0),m()};return e.jsxs("div",{className:s.wrapper,children:[e.jsx("div",{className:s.progress,children:e.jsx(P,{size:58,strokeWidth:5,progress:N,withText:!0})}),e.jsx("form",{onSubmit:x(_),children:e.jsxs("div",{className:s.blockWrapper,children:[e.jsxs("div",{className:s.uaBlock,children:[e.jsxs("div",{className:s.inputWrapper,children:[e.jsx("div",{children:e.jsx("p",{className:s.taskWord,children:a.length>0&&a[r].task==="ua"?(j=a[r])==null?void 0:j.en:(b=a[r])==null?void 0:b.ua})}),e.jsxs("div",{className:s.labelWrapper,children:[e.jsx("img",{src:C,alt:"Word"}),e.jsx("span",{children:"Ukrainian"})]})]}),n.length!==a.length&&e.jsxs("button",{type:"submit",className:s.btnNext,children:["Next",e.jsx("img",{src:S,alt:""})]})]}),e.jsx("div",{className:s.enBlock,children:e.jsxs("div",{className:s.inputWrapper,children:[e.jsxs("div",{className:s.textareaWrapper,children:[e.jsx(I,{name:"answerWord",control:y,render:({field:c})=>e.jsx("input",{type:"text",...c,className:s.input})}),g&&e.jsx("span",{className:s.errormessage,children:(W=g.answerWord)==null?void 0:W.message})]}),e.jsxs("div",{className:s.labelWrapper,children:[e.jsx("img",{src:T,alt:"Word"}),e.jsx("span",{children:"English"})]})]})})]})}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:f,children:"Save"}),e.jsx("button",{type:"button",className:s.btnCancel,onClick:q,children:"Cancel"})]}),w&&(d==null?void 0:d.length)!==0&&e.jsx(k,{onClose:()=>h(!1),children:e.jsx(te,{})})]})},le=()=>{const[n,o]=i.useState(!1);return e.jsxs("div",{className:s.emptyWrapper,children:[e.jsxs("div",{children:[e.jsx("h1",{children:"You don't have a single word to learn right now. "}),e.jsx("p",{children:"Please create or add a word to start the workout. We want to improve your vocabulary and develop your knowledge, so please share the words you are interested in adding to your study."}),e.jsxs("div",{className:s.btnWrapper,children:[e.jsx("button",{type:"submit",className:s.btn,onClick:()=>o(!0),children:"Add word"}),e.jsx(z,{className:s.btnCancel,to:"/dictionary",children:"Cancel"})]})]}),e.jsx("img",{srcSet:"./images/blood-report.png, ./images/blood-report@2x.png 2x",src:"./images/blood-report.png",alt:"blood report",width:"265",height:"283",className:s.img}),n&&e.jsx(k,{onClose:o,children:e.jsx(E,{onClose:()=>o(!1)})})]})},me=()=>{const{tasks:n,getTasks:o}=u(r=>({tasks:r.tasks,getTasks:r.getTasks}));return i.useEffect(()=>{o()},[o]),e.jsxs("main",{className:"container",children:[n.length!==0&&e.jsx(oe,{}),n.length===0&&e.jsx(le,{})]})};export{me as default};
